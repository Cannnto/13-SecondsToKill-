var t=document.createElement("canvas"),s=t.getContext("2d");document.body.appendChild(t),t.width=1024,t.height=768,document.addEventListener("keydown",(function(t){i[t.keyCode]=!0})),document.addEventListener("keyup",(function(t){i[t.keyCode]=!1})),document.addEventListener("mousemove",(function(h){e.x=h.x-t.getBoundingClientRect().left,e.y=h.y-t.getBoundingClientRect().top})),document.addEventListener("mouseup",(function(t){0!=t.button||Yh.dea||(Yh.atk=1);2!=t.button||Yh.amo.c||Yh.dea||(Yh.fAk=1)})),document.addEventListener("contextmenu",(t=>{t.preventDefault()}));var i=[],e={x:void 0,y:void 0},r=0;function n(t,h,i,e,r){s.fillStyle=r,s.fillRect(t,h,i,e)}function a(t,h,i,e){s.fillStyle=e,k(),s.arc(t,h,i,0,2*V()),z()}function c(t,h,i,e,r,n){s.fillStyle=n,k(),s.ellipse(t,h,i,e,r,0,2*V()),s.fill()}function o(t,h,s){return T((t.x+h/2-(Yh.x+Yh.w/2))**2+(t.y+s/2-(Yh.y+Yh.h/2))**2)*Ih<Xh}function l(t,h,s){for(var i=0;i<h.length;i++)for(var e=0;e<h[i].length;e++)h[i][e].constructor.name==t&&s.push(h[i][e])}function d(t,h){for(var s=[],i=0;i<h.length;i++)h[i]&&(s[i]=h[i][t]);return s}function u(t,h,s){var i=t,e=i.indexOf(";"),r=i.slice(0,e),n=i.slice(e+1);Vh.sTX=r,Vh.aTX=n,Vh.clr=h,Vh.t=s,Vh.cTM=s}function f(t){67==t.keyCode&&(Vh.t=0),document.removeEventListener("keyup",f)}function p(){s.save()}function m(){s.restore()}function b(t,h){s.translate(t,h)}function g(t,h){s.scale(t,h)}function v(t){s.rotate(t)}function C(t){return Math.abs(t)}function k(){s.beginPath()}function z(){s.closePath(),s.fill()}function M(t,h,i){s.fillStyle=i,k(),s.moveTo(t,h)}function A(t,h){s.lineTo(t,h)}function D(){return Math.random()}function F(t){return Math.sin(t)}function I(t){return Math.cos(t)}function T(t){return Math.sqrt(t)}function V(){return Math.PI}function P(t,h){s.shadowColor=h,s.shadowBlur=t}class B{constructor(t,h,s,i){this.nam=t,this.tmr={c:30*h,m:30*h},this.act=s,this.atm={c:30*i,m:30*i}}}function $(t,h,s){let i=0;for(;i<h;){let h=parseInt(20*D()+2),e=parseInt(28*D()+2);3!=t[h+1][e]&&3!=t[h-1][e]&&3!=t[h][e+1]&&3!=t[h][e-1]&&(1!=t[h][e]&&12!=t[h][e]||(t[h][e]=s,i++))}}var R=[],E=[],L=[],S=[],X=[];function W(t,h,s){var i=E.indexOf(Th[Rh].map.arr[t.l][t.c]);-1==i&&"Wal"!=Th[Rh].map.arr[t.l][t.c].constructor.name?(R.push(Th[Rh].map.arr[t.l][t.c]),Th[Rh].map.arr[t.l][t.c]=h,L.push(t),E.push(Th[Rh].map.arr[t.l][t.c]),S.push(0),X.push(s)):"Wal"!=Th[Rh].map.arr[t.l][t.c].constructor.name&&(Th[Rh].map.arr[t.l][t.c]=h,E[i]=Th[Rh].map.arr[t.l][t.c],S[i]=0,X[i]=s)}zzfx=(...t)=>zzfxP(zzfxG(...t)),zzfxP=(...t)=>{let h=zzfxX.createBufferSource(),s=zzfxX.createBuffer(t.length,t[0].length,zzfxR);return t.map(((t,h)=>s.getChannelData(h).set(t))),h.buffer=s,h.connect(zzfxX.destination),h.start(),h},zzfxG=(t=1,h=.05,s=220,i=0,e=0,r=.1,n=0,a=1,c=0,w=0,x=0,o=0,l=0,y=0,d=0,u=0,f=0,p=1,m=0,b=0)=>{let g,v,C=2*Math.PI,k=c*=500*C/zzfxR**2,z=(0<d?1:-1)*C/4,M=s*=(1+2*h*Math.random()-h)*C/zzfxR,A=[],D=0,F=0,I=0,T=1,V=0,P=0,B=0;for(i=99+zzfxR*i,m*=zzfxR,e*=zzfxR,r*=zzfxR,f*=zzfxR,w*=500*C/zzfxR**3,d*=C/zzfxR,x*=C/zzfxR,o*=zzfxR,l=zzfxR*l|0,v=i+m+e+r+f|0;I<v;A[I++]=B)++P%(100*u|0)||(B=n?1<n?2<n?3<n?Math.sin((D%C)**3):Math.max(Math.min(Math.tan(D),1),-1):1-(2*D/C%2+2)%2:1-4*Math.abs(Math.round(D/C)-D/C):Math.sin(D),B=(l?1-b+b*Math.sin(2*Math.PI*I/l):1)*(0<B?1:-1)*Math.abs(B)**a*t*zzfxV*(I<i?I/i:I<i+m?1-(I-i)/m*(1-p):I<i+m+e?p:I<v-f?(v-I-f)/r*p:0),B=f?B/2+(f>I?0:(I<v-f?1:(v-I)/f)*A[I-f|0]/2):B),g=(s+=c+=w)*Math.sin(F*d-z),D+=g-g*y*(1-1e9*(Math.sin(I)+1)%2),F+=g-g*y*(1-1e9*(Math.sin(I)**2+1)%2),T&&++T>o&&(s+=x,M+=x,T=0),!l||++V%l||(s=M,c=k,T=T||1);return A},zzfxV=.3,zzfxR=44100,zzfxX=new(window.AudioContext||webkitAudioContext),zzfxM=(t,h,s,i=125)=>{let e,r,n,a,c,w,x,o,l,y,d,u,f,p,m,b=0,g=[],v=[],C=[],k=0,z=0,M=1,A={},D=zzfxR/i*60>>2;for(;M;k++)g=[M=o=d=f=0],s.map(((i,d)=>{for(x=h[i][k]||[0,0,0],M|=!!h[i][k],m=f+(h[i][0].length-2-!o)*D,p=d==s.length-1,r=2,a=f;r<x.length+p;o=++r){for(c=x[r],l=r==x.length+p-1&&p||y!=(x[0]||0)|c,n=0;n<D&&o;n++>D-99&&l?u+=(u<1)/99:0)w=(1-u)*g[b++]/2||0,v[a]=(v[a]||0)-w*z+w,C[a]=(C[a++]||0)+w*z+w;c&&(u=c%1,z=x[1]||0,(c|=0)&&(g=A[[y=x[b=0]||0,c]]=A[[y,c]]||(e=[...t[y]],e[2]*=2**((c-12)/12),c>0?zzfxG(...e):[])))}f=m}));return[v,C]};var G=zzfxG(...[2,,172,.02,.05,.02,1,.2,1,,,,,1.2,10,.5,,.92,.08]),_=(zzfxG(...[2,,31,.04,.1,.71,4,.1,5,6,,,,1.1,,1,,.35,.25,.19]),zzfxG(...[2,.1,50,.06,.01,.69,4,.8,-.1,-1.8,50,-.99,,,1.2,.2,,.1,,,233]));zzfxG(...[2,,100,.1,.4,.6,4,1.5,,.3,,-.2,,.3,.5,.3,,.7,.1]);function Y(t){for(let h=0;h<t.length;h++)t[h].upd(),t[h].die()&&(t.splice(h,1),h--)}class K{constructor(t,h,s,i,e){if(this.x=t.x+D()*t.w,this.y=t.y+D()*t.h,this.vx=2*D()-1,this.vy=4*D()-5,this.a=1,this.r=3,i&&(this.r=10,this.vy=40*-D()),e&&(this.r=5),this.w=t.w,this.h=t.h,this.cor=h,this.e=t,this.cen=s,s){var r=100*D(),n=D()*(2*V()),a={x:r*I(n),y:r*F(n)};this.x+=a.x,this.y+=a.y}}die(){return this.a<0}upd(){this.cen?this.upd=function(){var t=Math.sqrt((this.cen.x-this.x)**2+(this.cen.y-this.y)**2)/50,h=Math.atan2(2*(this.cen.y-this.y),2*(this.cen.x-this.x)),s=t*I(h)*5,i=t*F(h)*5;this.x+=s,this.y+=i,this.a-=.03}:this.upd=function(){this.x+=this.vx,this.y+=this.vy*(1-2*Wh),this.a-=.03,this.r>1&&(this.r-=.05+.05*D())}}drw(){switch(this.cor){case"red":this.drw=function(){a(this.x,this.y,this.r,`rgba(${100+255*D()}, 10, 10, ${this.a})`)};break;case"ora":this.drw=function(){a(this.x,this.y,this.r,`rgba(${200+30*D()}, ${50+100*D()}, 10, ${this.a})`)};break;case"pur":this.y=this.e.y+this.e.h,this.drw=function(){a(this.x,this.y,this.r,`rgba(${60+200*D()}, ${115*D()}, 255, ${this.a})`)};break;case"bla":this.y=this.e.y+this.e.h,this.drw=function(){a(this.x,this.y,this.r,`rgba(${10*D()}, ${10*D()}, ${10*D()}, ${this.a})`)};break;case"blu":this.y=this.e.y+this.e.h,this.drw=function(){a(this.x,this.y,this.r,`rgba(10, ${50+100*Math.random()}, ${200+30*Math.random()}, ${this.a})`)};break;case"gre":this.y=this.e.y+this.e.h,this.drw=function(){a(this.x,this.y,this.r,`rgba(${0+50*Math.random()}, ${100+255*Math.random()}, ${0+50*Math.random()}, ${this.a})`)}}}}class O{constructor(t){this.x=t.x+D()*t.w,this.y=t.y+D()*t.h,this.r=7.5*D(),this.c=`rgb(${100+155*D()}, 10, 10)`}drw(){a(this.x,this.y,this.r,this.c)}}var q="#3A4A13",H="black",N="white";function j(t){return x=t.x,y=t.y,w=t.w,h=t.h}function J(t){let h=0;for(;h<10;){let s=parseInt(22*D()),i=parseInt(30*D());1==t[s][i]&&(t[s][i]=11,h++)}}function Q(t){n(t.x,t.y,32,32,"#24282E")}function U(t,h,i,e,r){s.font=`${e}px Trebuchet MS`,s.textAlign="center",s.textBaseline="middle",s.fillStyle=r,s.fillText(i,t,h)}function Z(t){p(),b(t.x+t.w/2,t.y+t.h/2),v(t.cnt*V()/180),b(-(t.x+t.w/2),-(t.y+t.h/2))}function tt(t){p(),t.c&&(b(t.x+t.w/2,t.y+t.h/2),g(-1,1),b(-(t.x+t.w/2),-(t.y+t.h/2)))}function ht(t,h){p(),b(t.x+t.w/2,t.y+t.h/2),v(h*V()/180),b(-(t.x+t.w/2),-(t.y+t.h/2))}function st(t,h){p(),b(t.x+t.w/2,t.y+t.h/2),g(h,h),b(-(t.x+t.w/2),-(t.y+t.h/2))}function it(t,h){n(t.x+t.w/4,t.y-t.h/2,t.w/2,t.h/2,`rgba(255,255,255,${h||1})`)}function et(t){n(t.x+.5*t.w/4,t.y+2.5*t.h/4,3*t.w/4,t.h/4,"#055769")}function rt(t,h){n(t.x+.5*t.w/4,t.y,3*t.w/4,1.25*t.h/2,h)}function nt(t,h,s,i,e){n(t.x+t.w*h,t.y-t.h*s+i,t.w/8,1.3*t.h/8,e)}function at(t,s){j(t),it(t),n(x+2*w/8,y-4*h/8,4*w/8,.75*h/8+1,"#D9D9D9"),n(x+2*w/8,y-3.25*h/8,3*w/8,h/16+1),n(x+2*w/8,y-2.75*h/8,w/8,h/8+1),n(x+2.5*w/4,y-2.35*h/8,w/8,1.3*h/8,H),n(x+w/4,y-h/2,w/2*s,h/10*s,"red"),n(x+w/4,y-h/2,w/13*s,h/4*s,"red"),n(x+w/3.3,y-h/2,w/13*s,h/6*s,"red"),n(x+w/1.7,y-h/2,w/13*s,h/4*s,"red")}function ct(t,s,i){j(t);let e={x:x+.75*w/4,y:y+3*h/4,w:1.25*w/4*2,h:-h/4*2};ht(e,-5*s),n(e.x,e.y,e.w/2,-e.h/2,i),m()}function wt(t,s,i){j(t),n(x+3*w/4+s,y,w/4,h/4,i)}function xt(t,s,i,e){j(t),n(x+4.15*w/4-w/14+s,y+h*i/7,w/14,h/14,e)}function ot(t,s,i,e,r){j(t);let a={x:x+2*w/4,y:y+.5*h/4-s,w:-w/4*2,h:-h/4*2};ht(a,-10*s+e),n(a.x,a.y,-a.w/2,-a.h/2,i),n(a.x-a.w/2/10,a.y,-a.w/2/1.3*r,-a.h/2/4*r,"red"),n(a.x-a.w/2/4,a.y,-a.w/2/4*r,-a.h/2*r,"red"),m()}function lt(t,s,i,e){j(t);let r={x:x+2*w/4,y:y+3*h/4,w:-1.25*w/4*2,h:-h/4*2};ht(r,5*s),n(r.x,r.y,-r.w/2,-r.h/2,i),n(r.x-r.w/4,r.y,-r.w/2/2*e,-r.h/2/4*e,"red"),n(r.x-r.w/2.7,r.y,-r.w/2/4*e,-r.h/2/1.5*e,"red"),m()}function yt(t,s,i,e,r){j(t);var a={x:x+.3*w/4,y:y,w:3.4*w/4,h:h};rt(a,s),e&&(n(x+3*w/4-.5,y-.5+r,w/4+1,h/2+1,H),n(x+3*w/4,y+r,w/4,h/2,q),nt(t,7/8,-1.35/8,r,"red")),!e&&n(x+3.25*w/4,y-.1*h/2,2,1.2*h/2,"#D9D9D9"),n(x+.75*w/4-.5,y-.1*h/2-.5,2.5*w/4+1,1.2*h/2+1,H),n(x+.75*w/4,y-.1*h/2,2.5*w/4,1.2*h/2,i),et(a)}function dt(t,s){j(t),it(t),n(x+2*w/8,y-4*h/8,4*w/8,2.25*h/8,"#D9D9D9"),n(x+4*w/8-1,y-4*h/8-1,(2*w/8+2)*s,(4*h/8+2)*s,q),n(x+2*w/8,y-4*h/8,1*w/16*s,2*h/8*s,"red"),n(x+2*w/8,y-4*h/8,2*w/16*s,1*h/12*s,"red")}function ut(t,s,i,e){j(t),rt(t,s),n(x+.5*w/4-.5,y-.1*h/2-.5,3*w/4/2+1,1.2*h/2+1,H),n(x+.5*w/4,y-.1*h/2,3*w/4/2,1.2*h/2,i),n(x+.5*w/4-.5,y-.1*h/2-.5,(3*w/4+1)*e,(1.2*h/2+1)*e,H),n(x+.5*w/4,y-.1*h/2,3*w/4*e,1.2*h/2*e,i),et(t)}function ft(t,s){j(t),it(t,s),nt(t,2.75/8,2.35/8,0,`rgba(0,0,0,${s||1})`),nt(t,4.25/8,2.35/8,0,`rgba(0,0,0,${s||1})`),n(x+2*w/8,y-4*h/8,4*w/8,.75*h/8,`rgba(217,217,217,${s||1})`),n(x+5*w/8,y-3.25*h/8,w/8,h/16),n(x+2*w/8,y-3.25*h/8,w/8,h/16)}function pt(t,s){!function(t,s){j(t),n(x+w/4-.5,y-.5+s,w/2+1,h/2+1,H),n(x+2*w/8,y+s,3*w/8,h/2,q),n(x+5*w/8-1,y+h/8+s,w/8+1,1.5*h/4,q)}(t,s),nt(t,2.75/8,-1.35/8,s,"red"),nt(t,4.25/8,-1.35/8,s,"red")}function mt(t,s){j(t);let i={w:w/4,h:1.2*h/2,y:.1*h/2};n(x+2.5*w/4-1,y-i.y-.5,i.w+1,i.h+1,H),n(x+2.5*w/4,y-i.y,i.w,i.h,s),n(x+2*w/3-2,y-i.y,2,i.h,"#D9D9D9")}function bt(t,s,i,e,r,a){j(t),n(i+x,y+.5*h/4-s+e/4,w/4,h/4,r),n(i+x,y+.5*h/4-s+e/4,w/16*a,h/8*a,"red"),n(i+x+3*w/16,y+.5*h/4-s+e/4,w/16*a,h/4.5*a,"red")}function gt(t,s,i,e){j(t),n(i+x,y+.4*h/3.5-s,w/14,h/14,e)}function vt(t,s,i){j(t),n(x+i,y+.35*h/3.5+s,w/3.5,h/3.5,"#46464b"),gt(t,-s,i+w/64,"#0000FF"),gt(t,-s,i+w/3.5/2-w/14/2,"#FF0000"),gt(t,-s,i+w/3.5/2+w/18,"#0000FF"),!(t.a==t.bac)&&n(x+w/7+i,y+1.1*h/3.5+s,w/7,h/14,H),gt(t,-s,i+w/3.5/2+w/18,"#00FF00")}function Ct(t,h,s,i){bt(t,-h,0,0,s,0),bt(t,h,3*t.w/4,0,s,i)}function kt(t,s,i,e,r,a){j(t);let c={x:x+.5*w/4,y:y+3*h/4,w:1.25*w/4,h:-h/4*2},o={x:x+2.25*w/4,y:c.y,w:c.w,h:c.h};st(c,s),n(c.x,c.y,c.w,-c.h/2,e),m(),st(o,i),n(o.x,o.y,o.w,-o.h/2,r),n(o.x,o.y,o.w/6*a,-o.h/3*a,"red"),n(o.x,o.y,o.w/1.5*a,-o.h/12*a,"red"),n(o.x,o.y,o.w/3*a,-o.h/6*a,"red"),m()}function zt(t,s,i,e,r,a){j(t);let c={x:x+2*w/4,y:y+.5*h/4,w:-w/4*2,h:-h/4*2};var o=0;t.a!=t.sid&&(o=e/4),t.a==t.sid&&ht(c,-10*i+e),n(s-2.5,y+h/16-i+o,w/4+5,h/16,H),n(s+w/10,y+.5*h/4-i+o,w/16,h/4,"#552A18"),n(s+w/16,y+1.5*h/4-i+o,w/8,h/8,"#6F6F6F"),M(s+w/24,y-4*h/8+.5-i+o,r),A(s+w/8,y-6*h/8+.5-i+o),A(s+w/4.8,y-4*h/8+.5-i+o),z(),n(s+w/24,y-h/2-i+o,w/6,9*h/16,r);var l=-0*i*V()/180;t.a==t.sid&&(m(),l=(-10*i+e)*V()/180);let d={x:s+w/24,y:y-h/2-i+o+20*F(l),w:w/6,h:9*h/16},u={x:s+w/24-5.1*h/8,y:y-h/2-i+5*F(l),w:d.h,h:d.w};t.c&&(d.x-=w/4,u.x+=u.w);let f=d;if(180*l/V()<-45&&(f=u),t.dea)for(let t=0;t<5;t++)Bh.push(new K(f,"red",{x:d.x+d.w/2,y:d.y+d.h/2}));if(a||Ih)for(let t=0;t<5;t++)Yh.dea?Bh.push(new K(f,"ora",0,0,1)):Bh.push(new K(f,"ora"))}function Mt(t){j(t),s.fillStyle="red",ht(t,180*r/V()),k(),M(x,y),A(x+w/2,y+h/6),A(x+w,y+h/2),A(x+w/2,y+h/1.2),A(x,y+h),A(x+w/3,y+h/1.3),A(x+w/2,y+h/2),A(x+w/3,y+h/4),z(),m(),s.fill()}function At(t){j(t);let s={x:x+w/2-w/16,y:y+w/3-6,w:w/8,h:h},i={x:x+w/2-w/16,y:y-7.5,w:w/16,h:h/1.2},e="#E29628",r="#B5701D";n(x,y,w,h,"#995F12"),ht(s,-60),n(s.x,s.y,s.w,s.h,r),m(),ht(i,82),n(i.x,i.y,i.w,i.h,r),m(),n(x+1,y+1,w/8-2,h-2,e),n(x+1,y+1,w-2,h/12-2,e),n(x+1,y+h/4+1,w-2,h/8-2,e),n(x+1+.875*w,y+1,w/8-2,h-2,e),n(x+1,y+.875*h+1,w-2,h/8-2,e)}function Dt(t){j(t),U(x+w/2,y-h/1.1,"[E]",w/2,N)}function Ft(t,h,s,i,e,r){j(t);let n=t.lif.c/t.lif.m*r||1;P(3,H),M(x,y-s-e,h),A(x+w*n,y-s-e),A(x-i+(w+2*i)*n,y-s),A(x+w*n,y-s+e),A(x,y-s+e),A(x-i,y-s),z(),P(0,H)}function It(t){j(t),Vt(t,0),P(10,"black"),n(x+2*w/5,y,w/5,h,"black"),Pt(0),Bt(0),ht(t,180),Pt(0),Bt(0),m(),P(8,"red"),M(x+2.3*w/5,y,"#880D41"),A(x+2.8*w/5,y),A(x+2.5*w/5,y+h),z(),P(0),$t(t,0),$t(t,w/1.6)}function Tt(t){j(t),P(10,"black"),M(x+1.5*w/5,y,"black"),A(x+1.5*w/5,y-h/3.25),A(x+2*w/5,y-h/2.75),A(x+3*w/5,y-h/2.75),A(x+3.5*w/5,y-h/3.25),A(x+3.5*w/5,y),z(),n(x+w/2-w/16/2,y-h/4,w/16,h/32,"#FF8E54"),n(x+w/2-w/16/2,y-h/4-h/32,w/16,h/32,"#EC082A"),n(x+w/2-w/16/2,y-h/4+h/32,w/16,h/32,"#EC082A"),n(x+w/2+w/16/2,y-h/4,w/16,h/32,"#EC082A"),n(x+w/2-w/5.4/2,y-h/4,w/16,h/32,"#EC082A"),P(0),n(x+w/2+w/16/2,y-h/4+h/32,w/32,h/32,"#670816"),n(x+w/2+w/16/2,y-h/4-h/32,w/32,h/32,"#670816"),n(x+w/2-w/8/2,y-h/4+h/32,w/32,h/32,"#670816"),n(x+w/2-w/8/2,y-h/4-h/32,w/32,h/32,"#670816")}function Vt(t,i,e){j(t),c(x+w/2,y-h/12,w/2.25*!i,h/4.5*!i,0,"#450462"),c(x+w/2,y-h/12,w/2.8*!i,h/4.6*!i,0,"black"),s.fillStyle="#450462",k(),s.ellipse(x+w/2,y-h/12,w/2.25*i,h/4.5*i,0,V()-60*V()/180,2*V()-30*V()/180),s.fill(),M(x+1*w/5,y,"#28013A"),A(x+1.5*w/5,y-h/2),A(x+3.5*w/5,y-h/2),A(x+4*w/5,y),z(),c(x+w/2,y-h/12,w/2.25*e,h/4.5*e,0,"#450462"),M(x+.9*w/5,y+h/8,"#450462"),A(x+.3*w/5,y-h/32),A(x+4.7*w/5,y-h/32),A(x+4.1*w/5,y+h/8),z(),M(x,y+h,"#450462"),A(x+1*w/5,y),A(x+4*w/5,y),A(x+w,y+h),z(),M(x+.9*w/5,y+h/9,"#28013A"),A(x+4.1*w/5,y+h/9),A(x+4.2*w/5,y+h/6),A(x+.8*w/5,y+h/6),z()}function Pt(t){M(t+x+1.5*w/5,y,"black"),A(t+x+2*w/5,y),A(t+x+2*w/5,y+h/4),A(t+x+1.8*w/5,y+h/16),z()}function Bt(t){M(t+x+3.5*w/5,y,"black"),A(t+x+3*w/5,y),A(t+x+3*w/5,y+h/4),A(t+x+3.2*w/5,y+h/16),z()}function $t(t,s){j(t),M(s+x,y+h/1,"black"),A(s+x+w/16,y+h/1.15),A(s+x+w/16,y+h/1.1),A(s+x+1*w/16,y+h/1.02),A(s+x+2*w/16,y+h/1.07),A(s+x+2.5*w/16,y+h/1.02),A(s+x+4*w/16,y+h/1.08),A(s+x+6*w/16,y+h/1),z()}function Rt(t,s,i){j(t),t.c=i;let e=0,r={x:x+2*w/4,y:y+.5*h/4-s,w:-w/4*2,h:-h/4*2};t.a==t.sid&&(ht(r,-10*s),e=15),tt(t),P(5,"red"),M(x+3*w/4-e,y+h/1.05-s,"#880D41"),A(x+3.4*w/4-e,y+h/5-s),A(x+3.5*w/4-e,y-h/4-s),A(x+4.5*w/4-e,y-h/3.5-s),A(x+4.75*w/4-e,y-h/2-s),A(x+5*w/4-e,y-h/2-s),A(x+4*w/4-e,y-h/5-s),A(x+3.75*w/4-e,y+h/5-s),A(x+3.4*w/4-e,y+h/1.05-s),z(),P(0),P(10,"red"),a(x+3.75*w/4-e,y-h/2-s,w/8,"white"),P(0),m(),t.a==t.sid&&m(),t.c=0}function Et(t,h){n(t,h,1,10.6),n(t+8,h,1,10.6),n(t+16,h,1,10.6),n(t+24,h,1,10.6)}function Lt(t){j(t),n(x,y,32,32,"#20252E"),n(x,y,1,32,"#6D798B"),n(x+31,y,1,32)}function St(t,h,s){if(j(t),Th[Rh].map.arr[y/32+s]&&Th[Rh].map.arr[y/32+s][x/32+1*h])return"Wal"==Th[Rh].map.arr[y/32+s][x/32+1*h].constructor.name}function Xt(t,s){j(t),c(x+w/2,y+h/2,w/3,h/8,0,s),c(x+w/2,y+h/1.2,w/2.5,h/5,0,"gray"),c(x+w/2,y+h/1.2,w/3,h/8,0,s),n(x+w/6,y+h/2,w/1.5,h/3,s)}function Wt(t){M(x,y+h/1.25,t),A(x+w/1.25,y),A(x+w,y),A(x+w,y+.25*h),A(x+.25*w,y+h),A(x,y+h),z()}class Gt{constructor(t,h){this.x=t,this.y=h}sum(t){this.x+=t.x,this.y+=t.y}div(t){this.x/=t,this.y/=t}mtp(t){this.x*=t,this.y*=t}lim(t){this.x=Math.min(Math.max(this.x,-t),t),this.y=Math.min(Math.max(this.y,-t),t)}}class _t{constructor(t,h,s,i){this.x=t,this.y=h,this.w=s/2,this.h=i/2,this.d=new Gt(0,0),this.spd=new Gt(0,0),this.c=0,this.cnt=1,this.rot=0,this.par=[],this.fri=0,this.acel=0}drw(){this.d.x&&(this.a=this.sid,this.c=0,this.d.x<0&&(this.c=1)),this.d.y>0&&C(this.d.y)>C(this.d.x)&&(this.a=this.fro,this.c=0),this.d.y<0&&C(this.d.y)>C(this.d.x)&&(this.a=this.bac,this.c=0),this.spd.x||this.spd.y?(this.cnt++,this.rot&&(this.cnt-=2),(this.cnt>=3||this.cnt<=-3)&&(this.rot=!this.rot)):this.cnt>0?this.cnt-=.25:this.cnt<0&&(this.cnt+=.25),this.a(),this.lfB()}lfB(){}a(){this.fro()}cld(t){for(let h=0;h<t.length;h++)if(this.x+this.w>=t[h].x&&this.x<=t[h].x+t[h].w&&this.y+this.h>=t[h].y&&this.y<=t[h].y+t[h].h)return!0}u(t){return Th[Rh].map.arr[t.l][t.c].col||"dor"==Th[Rh].map.arr[t.l][t.c].constructor.name}CWL(){return this.mp1={c:parseInt(this.x/32),l:parseInt(this.y/32)},this.mp2={c:parseInt((this.x+this.w)/32),l:parseInt(this.y/32)},this.mp3={c:parseInt((this.x+this.w)/32),l:parseInt((this.y+this.h)/32)},this.mp4={c:parseInt(this.x/32),l:parseInt((this.y+this.h)/32)},this.u(this.mp1)||this.u(this.mp2)||this.u(this.mp3)||this.u(this.mp4)}}class Yt extends _t{constructor(t,h,s,i){super(t,h,s,i),this.atC=0,this.fAC=0,this.fsw=0,this.bal=[],this.msp=5,this.int=0,this.ice=0,this.tim={c:1/0,m:1/0},this.amo={c:0,m:60},this.dea=0,this.deC=0}sid(){tt(this),wt(this,this.cnt,N),ct(this,this.cnt,N),Z(this),at(this),yt(this,"#6F6F6F","#424242",0),m(),zt(this,this.x+2*this.w/4,this.cnt,this.atC,"red",this.fsw),ot(this,this.cnt,N,this.atC,0),lt(this,this.cnt,N,0),m()}bac(){zt(this,this.x,-this.cnt,this.atC,"red",this.fsw),bt(this,-this.cnt,0,this.atC,N,0),bt(this,this.cnt,3*this.w/4,0,N,0),kt(this,this.cnt<0?.8:this.cnt?1.2:1,this.cnt>0?.8:this.cnt?1.2:1,N,N,0),Z(this),dt(this,"#424242"),ut(this,"#6F6F6F","#424242",1),m()}fro(){Z(this),ft(this),function(t){j(t),rt(t,"#6F6F6F");let s={w:w/4,h:1.2*h/2,y:.1*h/2};n(x+.5*w/4,y-s.y-.5,s.w+1,s.h+1,H),n(x+.5*w/4,y-s.y,s.w,s.h,"#424242"),n(x+w/3,y-s.y,2,s.h,"#D9D9D9"),mt(t,"#424242"),et(t)}(this),m(),bt(this,this.cnt,3*this.w/4,this.atC,N,0),bt(this,-this.cnt,0*this.w/4,0,N,0),zt(this,this.x+3*this.w/4,this.cnt,this.atC,"red",this.fsw),kt(this,this.cnt<0?.8:this.cnt?1.2:1,this.cnt>0?.8:this.cnt?1.2:1,N,N,0)}ATK(){var t={x:this.x+40*this.d.x,y:this.y+60*this.d.y-this.h/2,w:this.h,h:1.5*this.w};Mt(t),zzfxP(G);for(var h=0;h<Th[Rh].boxes.length;h++)Th[Rh].boxes[h].box.cld([t])&&(Th[Rh].boxes[h].box.x=Th[Rh].boxes[h].box.spX,Th[Rh].boxes[h].box.y=Th[Rh].boxes[h].box.spY);for(h=0;h<Ph.length;h++)Ph[h].cld([t])&&(Ph[h].lif.c-=50)}fir(){zzfxP(_),this.bal.push(new Kt(this.x+this.w/2,this.y,16,16,r)),this.amo.c++}move(t){this.x+=this.spd.x*C(this.spd.x/this.len)*t,this.y+=this.spd.y*C(this.spd.y/this.len)*t}upd(){this.amo.c&&this.amo.c++,this.amo.c==this.amo.m&&(this.amo.c=0),this.atA&&(this.atC+=20,this.atk=0,this.atC>0&&(this.atC=0,this.ATK(),this.atA=0)),this.atk&&(this.atC-=15,this.atC<-90&&(this.atA=1)),this.fAk&&!this.amo.c&&(this.fAC++,this.fsw=1,this.fAC>30&&(this.fsw=0,this.fAC=0,this.fAk=0,this.fir())),this.dea&&(i=[],this.spd.mtp(0),r=V()/2,this.deC++,this.deC>120&&(clearInterval(Gh),Gh=setInterval(es,1e3/30))),this.int&&Dt(this),this.int=0,this.len=this.spd.x||this.spd.y?T(this.spd.x**2+this.spd.y**2):1,this.move(1),this.CWL()&&(this.move(-1),this.spd.mtp(0));for(var t=0;t<Th[Rh].boxes.length;t++)this.cld([Th[Rh].boxes[t].box])&&(Th[Rh].boxes[t].box.psh(this,this.d.x,this.d.y),this.move(-1));this.spd.x*=this.fri,this.spd.y*=this.fri,C(this.spd.x)<.05&&(this.spd.x=0),C(this.spd.y)<.05&&(this.spd.y=0);let h=parseInt((this.x+this.w/2)/32),s=parseInt((this.y+this.h/2)/32);if(this.ice)for(let t=-1;t<2;t++)for(let i=-1;i<2;i++)W({l:t+s,c:i+h},new Ch(32*(i+h),32*(t+s)),300);this.tim.c<=0&&(this.dea=1),this.tim.c>this.tim.m&&(this.tim.c=this.tim.m),this.tim.c>0&&this.tim.c--}}class Kt extends _t{constructor(t,h,s,i,e){super(t,h,s,i),this.a=e}drw(){n(this.x,this.y,this.w,this.h,"red");for(let t=0;t<5;t++)Bh.push(new K(this,"ora"))}die(){if(this.CWL())return 1;for(var t=0;t<Th[Rh].boxes.length;t++)if(this.cld([Th[Rh].boxes[t].box]))return 1;for(t=0;t<Ph.length;t++)if(Ph[t].cld([this]))return Ph[t].lif.c-=100,1}upd(){this.x+=10*I(this.a),this.y+=10*F(this.a);let t={c:parseInt((this.x+this.w/2)/32),l:parseInt((this.y+this.h/2)/32)};"Ice"==Th[Rh].map.arr[t.l][t.c].constructor.name&&W(t,new dh(32*t.c,32*t.l),30)}}class Ot extends Kt{constructor(t,h,s,i,e){super(t,h,s,i,e),this.x+=this.w/2}die(){if(this.CWL())return 1;for(var t=0;t<Th[Rh].boxes.length;t++)if(this.cld([Th[Rh].boxes[t].box]))return 1;return Yh.cld([this])?(Yh.tim.c-=30,1):void 0}upd(){super.drw(),this.x+=15*I(this.a),this.y+=15*F(this.a);let t=parseInt((this.x+this.w/2)/32),h=parseInt((this.y+this.h/2)/32);!Th[Rh].map.arr[h][t].uFr&&(Th[Rh].map.arr[h][t].uFr=1)}}class qt{constructor(t,h,s,i,e){this.dtx=t,this.dty=h,this.w=s,this.h=i,this.a=e,this.x=-400*I(e)+t,this.y=-400*F(e)+h-i}upd(){n(this.x,this.y,this.w,this.h,"rgb(161, 81, 35)");for(let t=0;t<5;t++)Bh.push(new K(this,"ora"));this.x+=10*I(this.a),this.y+=10*F(this.a),a(this.dtx,this.dty,50,"rgba(255,0,0,"+100*this.y/this.dty/5/100+")")}}class Ht extends _t{constructor(t,h){super(t,h,64,64),this.spX=t,this.spY=h}psh(t){this.spd.x=t.spd.x,this.spd.y=t.spd.y}drw(){At(this)}upd(){this.x+=this.spd.x,this.y+=this.spd.y,this.CWL()&&(this.x-=this.spd.x,this.y-=this.spd.y,this.spd.x=0,this.spd.y=0),this.spd.x*=this.fri,this.spd.y*=this.fri,C(this.spd.x)<.05&&(this.spd.x=0),C(this.spd.y)<.05&&(this.spd.y=0)}}class Nt extends _t{constructor(t,h,s,i){super(t,h,s,i),this.anC=0,this.gra=0,this.spe=1,this.spV=new Gt(0,0),this.acV=new Gt(0,0),this.sVM=2,this.tVM=1.25,this.r=50,this.raE=50,this.raP=400,this.rPM=600,this.wH=1,this.wHa=1}die(){return this.dea}wlk(t,h){this.x+=t,this.y+=h}upd(){let t=new Gt(0,0),h=new Gt(0,0),s=0;for(let i of Ph){let e=T((this.x+this.w/2-(i.x+i.w/2))**2+(this.y+this.h/2-(i.y+i.h/2))**2),r=T((this.x+this.w/2-(Yh.x+Yh.w/2))**2+(this.y+this.h/2-(Yh.y+Yh.h/2))**2);if(r<=this.raP?(h=new Gt(Yh.x+Yh.w/2-(this.x+this.w/2),Yh.y+Yh.h/2-(this.y+this.h/2)),this.raP=this.rPM):this.raP>150&&(this.raP-=.2),this!=i&&e<=this.raP&&(i.raP>this.raP||this.raP>i.raP)&&(i.raP=this.raP),this!=i&&e<=this.raE){let h=new Gt(this.x+this.w/2-(i.x+i.w/2),this.y+this.h/2-(i.y+this.h/2));s++,t.sum(h)}s&&t.div(s);let n=T(t.x**2+t.y**2);n&&t.div(n),t.mtp(this.spe*this.sVM);let a=T(h.x**2+h.y**2);a&&h.div(a),h.mtp(this.spe*this.tVM),this.acV.sum(t),this.acV.sum(h),this.spV.sum(this.acV),this.spV.lim(this.spe),r<28&&(Yh.tim.c-=this.dmg,this.wlk(-this.spV.x,-this.spV.y)),this.anC&&(this.spV.mtp(0),h.mtp(0)),this.d=h,this.spd=h}this.wlk(this.spV.x,this.spV.y),this.CWL()&&this.wlk(-this.spV.x,-this.spV.y);for(var i=0;i<Th[Rh].boxes.length;i++)this.cld([Th[Rh].boxes[i].box])&&(Th[Rh].boxes[i].box.psh(this,this.d.x,this.d.y),this.wlk(-this.spV.x,-this.spV.y));this.acV.mtp(0),this.spV.x*=this.fri,this.spV.y*=this.fri,this.spV.x<.1&&(this.spV.x=0),this.spV.y<.1&&(this.spV.y=0)}}class jt extends Nt{constructor(t,h,s,i){super(t,h,s,i),this.lif={m:100,c:100},this.rec=60,this.dmg=.5}sid(){tt(this),ct(this,this.cnt,q),Z(this),yt(this,"#5C0C0C","#5C0C0C",1,this.anC),m(),ot(this,this.cnt,q,0,0),lt(this,this.cnt,q,0),m()}bac(){Ct(this,this.cnt,q,0),kt(this,this.cnt<0?.8:this.cnt?1.2:1,this.cnt>0?.8:this.cnt?1.2:1,q,q,0),Z(this),ut(this,"#5C0C0C","#5C0C0C",1),m()}fro(){Z(this),ut(this,"#5C0C0C","#5C0C0C",1),pt(this,this.anC),m(),Ct(this,this.cnt,q,0),kt(this,this.cnt<0?.8:this.cnt?1.2:1,this.cnt>0?.8:this.cnt?1.2:1,q,q,0)}lfB(){if(this.y-.5+this.h/2+1+this.anC>this.y+this.h&&(this.dea=1,Yh.tim.c+=this.rec,Eh++),this.lif.c<=0){this.gra+=.25,this.anC+=this.gra;for(let t=0;t<5;t++)Bh.push(new K(this,"red"));$h.push(new O(this)),zzfx(...[,,31,.04,.1,.71,4,.1,5,6,,,,1.1,,1,,.35,.25,.19])}else Ft(this,N,this.h/4,3,3,0),Ft(this,"red",this.h/4,3,3,1)}}class Jt extends Nt{constructor(t,h,s,i){super(t,h,s,i),this.lif={m:200,c:200},this.spd.x=0,this.rec=Yh.tim.m,this.dmg=1}sid(){tt(this),ct(this,this.cnt,q),wt(this,this.cnt,q),Z(this),at(this,1),yt(this,"#5C0C0C","#B40F0F",0,this.anC),m(),ot(this,this.cnt,N,0,1),lt(this,this.cnt,N,1),m()}bac(){bt(this,this.cnt,3*this.w/4,0,q,0),bt(this,-this.cnt,0,0,N,1),kt(this,this.cnt<0?.8:this.cnt?1.2:1,this.cnt>0?.8:this.cnt?1.2:1,N,q,0),Z(this),dt(this,1),ut(this,"#5C0C0C","#B40F0F",0),m()}fro(){var t;Z(this),ut(this,"#5C0C0C","#5C0C0C",1),ft(this,this.anC),t=this,this.anC,j(t),n(x+w/4-1,y-h/2-1,w/4+2,h/2+2,q),n(x+2.4*w/8,y-2.9*h/8,w/6,1.5*h/8,"red"),n(x+3*w/4-w/16,y-h/2,w/16,h/4,"red"),n(x+3*w/4-w/8,y-h/2,w/8,h/16,"red"),mt(this,"#B40F0F"),m(),bt(this,this.cnt,3*this.w/4,0,N,1),bt(this,-this.cnt,0,0,q,0),kt(this,this.cnt<0?.8:this.cnt?1.2:1,this.cnt>0?.8:this.cnt?1.2:1,q,N,1)}lfB(){if(this.y-.5+this.h/2+1+this.anC>this.y+this.h&&(this.dea=1,Yh.tim.c+=this.rec),this.lif.c<=0){this.gra+=.25,this.anC+=this.gra;for(let t=0;t<5;t++)Bh.push(new K(this,"red"));$h.push(new O(this)),zzfx(...[,,31,.04,.1,.71,4,.1,5,6,,,,1.1,,1,,.35,.25,.19])}else Ft(this,N,this.h/1.3,5,3,0),Ft(this,"red",this.h/1.3,5,3,1)}}class Qt extends Nt{constructor(t,h,s,i){super(t,h,s,i),this.lif={m:5e3,c:5e3},this.spd.x=1,this.fle=!0,this.tpt=[],this.tpc={c:0,m:60},this.tpc.c=this.tpc.m,this.ats=[new B("Frb",2,!1,.5),new B("Ice",3,!1),new B("Mtr",5,!1,.5),new B("Aur",7,!1)],this.bal=[],this.auR=100,this.mtT=[],this.mtr=[]}sid(){var t,s;P(15*!this.fle,"red"),tt(this),t=this,s=this.cnt,j(t),n(x+3*w/4+s,y,w/3.5,h/3.5,"#46464b"),n(x+4.15*w/4-w/7+s,y+1*h/3.5-h/14,w/7,h/14,H),xt(t,s,0,"#0000FF"),xt(t,s,.1,"#FF0000"),xt(t,s,.2,"#00FF00"),b(0,this.cnt/8),Vt(this,1),$t(this,0),$t(this,this.w/3),$t(this,this.w/1.6),b(0,-this.cnt/8),Rt(this,this.cnt/5),ot(this,this.cnt/5,H,0,0),m(),P(0);for(let t=0;t<10;t++)Bh.push(new K(this,"bla"))}fro(){P(15*!this.fle,"red"),b(0,this.cnt/8),It(this,this.cnt),Tt(this,this.cnt),b(0,-this.cnt/8),Ct(this,this.cnt,H,0),Rt(this,this.cnt),vt(this,this.cnt,0),P(0);for(let t=0;t<10;t++)Bh.push(new K(this,"bla"))}bac(){P(15*!this.fle,"red"),Rt(this,-this.cnt,1),Ct(this,this.cnt,H,0),vt(this,-this.cnt,3*this.w/4),b(0,this.cnt/8),Vt(this,0,1),$t(this,0),$t(this,this.w/3),$t(this,this.w/1.6),b(0,-this.cnt/8),P(0);for(let t=0;t<10;t++)Bh.push(new K(this,"bla"))}lfB(){if(this.y-.5+this.h/2+1+this.anC>this.y+this.h&&(this.dea=1),this.lif.c<=0){this.gra+=.25,this.anC+=this.gra;for(let t=0;t<5;t++)Bh.push(new K(this,"red"));$h.push(new O(this))}else Ft(this,N,this.h/1.5,5,4,0),Ft(this,"purple",this.h/1.5,5,4,1)}tlp(){this.tpt=[],l("flr",Th[Rh].map.arr,this.tpt);var t=this.tpt[parseInt(Math.random()*this.tpt.length)];this.x=t.x-this.w/2,this.y=t.y-this.h/2;let h=T((this.x+this.w/2-(Yh.x+Yh.w/2))**2+(this.y+this.h/2-(Yh.y+Yh.h/2))**2);this.ats[3].act?(this.CWL()||null==t.x||null==t.y||h>100)&&this.tlp():(this.CWL()||null==t.x||null==t.y||h<250||h>800)&&this.tlp()}raG(){let t=Math.floor(Math.random()*this.ats.length);switch(this.ats[t].nam){case"Frb":this.ats[0].act=!0,this.ats[0].tmr.c=this.ats[0].tmr.m,this.ats[0].atm.c=this.ats[0].atm.m,u("Die!;","purple",100);break;case"Ice":this.ats[1].act=!0,this.ats[1].tmr.c=this.ats[1].tmr.m,u("Freeze, insect!;","purple",100);break;case"Mtr":this.ats[2].act=!0,this.ats[2].tmr.c=this.ats[2].tmr.m,this.ats[2].atm.c=this.ats[2].atm.m,l("flr",Th[Rh].map.arr,this.mtT),u("Behold the heaven's wrath!;","purple",100);break;case"Aur":this.ats[3].act=!0,this.ats[3].tmr.c=this.ats[3].tmr.m,u("Burn, insect!;","purple",100)}}sFb(){this.ats[0].tmr.c--,this.ats[0].atm.c--;var t=Math.atan2(Yh.y-this.y,Yh.x-(this.x+this.w/2));!this.ats[0].atm.c&&(this.bal.push(new Ot(this.x,this.y,40,40,t)),this.ats[0].atm.c=this.ats[0].atm.m),!this.ats[0].tmr.c&&(this.ats[0].act=!1)}sIc(){this.ats[1].tmr.c--,!this.ats[1].tmr.c&&(this.ats[1].act=!1,Yh.ice=0)}sMt(){this.ats[2].tmr.c--,this.ats[2].atm.c--;var t=this.mtT[parseInt(Math.random()*this.mtT.length)];!this.ats[2].atm.c&&(this.mtr.push(new qt(t.x,t.y,40,40,135*Math.PI/180)),this.ats[2].atm.c=this.ats[2].atm.m),!this.ats[2].tmr.c&&(this.ats[2].act=!1,this.mtT=[])}sAu(){T((this.x+this.w/2-(Yh.x+Yh.w/2))**2+(this.y+this.h/2-(Yh.y+Yh.h/2))**2)<this.auR&&Yh.tim.c--,this.ats[3].tmr.c--,!this.ats[3].tmr.c&&(this.ats[3].act=!1,this.fle=!0)}upd(){this.tpc.c>0?this.tpc.c--:(this.tpc.c=this.tpc.m,this.raG(),this.tlp()),this.fle?(this.sVM>0&&(this.sVM*=-1),this.tVM>0&&(this.tVM*=-1)):(this.sVM<0&&(this.sVM*=-1),this.tVM<0&&(this.tVM*=-1)),super.upd(),this.ats[0].act&&this.sFb(),this.ats[1].act&&(Yh.ice=1,this.sIc()),this.ats[2].act&&this.sMt(),this.ats[3].act&&(this.fle=!1,this.sAu());for(let t=0;t<this.mtr.length;t++)this.mtr[t].upd(),(this.mtr[t].y+this.mtr[t].h/2>=this.mtr[t].dty||this.mtr.x<=this.mtr[t].dtx)&&(this.mtr.splice(t,1),t--);Y(this.bal)}}function Ut(t){return Array.from({length:24},(h=>Array.from({length:32},(h=>t))))}var Zt=[{x:520,y:672},{x:845,y:672},{x:499.2,y:672},{x:819,y:672},{x:845,y:672},{x:845,y:672},{x:499.2,y:672},{x:819,y:672},{x:520,y:672}];function th(h){for(var s=0;s<t.height/32;s++)h[s][0]=h[s][31]=2;for(var i=1;i<t.width/32-1;i++)h[0][i]=h[23][i]=2}function hh(t){th(t);for(var h=0;h<23;h++)t[11][h]=2;for(var s=12;s<24;s++)t[s][22]=2;for(h=0;h<22;h++)for(s=12;s<24;s++)t[s][h]=0;t[0][16]=t[0][15]=3,t[2][22]=t[1][1]=t[22][30]=4}function sh(t){th(t);for(var h=1;h<16;h++)for(var s=0;s<13;s++)t[h+8][s+19]=t[h+8][s]=0;for(s=0;s<13;s++)t[9][s+19]=t[9][s]=2;for(h=10;h<24;h++)t[h][12]=t[h][19]=2;t[0][16]=t[0][15]=3,t[5][5]=t[5][25]=4}function ih(t){th(t);for(var h=0;h<8;h++)for(var s=11;s<21;s++)t[h][s]=t[h+16][s]=0;for(s=11;s<21;s++)t[16][s]=t[7][s]=2;for(h=0;h<7;h++)t[h][11]=t[h][20]=t[h+17][11]=t[h+17][20]=2;t[0][6]=t[0][5]=3,t[12][3]=t[2][23]=t[1][1]=t[22][30]=4}function eh(t){th(t),t[0][16]=t[0][15]=2;for(var h=7;h<17;h++)for(var s=10;s<32;s++)t[h][s]=0;for(s=10;s<32;s++)t[16][s]=t[7][s]=2;for(h=8;h<16;h++)t[h][10]=2;t[0][26]=t[0][25]=3,t[4][9]=t[16][2]=t[17][30]=t[6][30]=4}function rh(){Eh>=13&&(Sh=1)}function nh(t){var h=0;for(let s=0;s<t.boxT.length;s++)t.boxT[s].act&&h++;Sh=h==t.boxT.length&&0!=h?1:0}var ah=0;function ch(t){return ah==t.btns.length&&(Sh=1,ah=0),ah}function wh(t){var h="";if(t.maAr.length){for(let s=0;s<t.maAr.length-2;s++)h+=t.maAr[s].dgt;for(let s=0;s<t.maAr.length;s++)t.maAr[s].fix?t.maAr[s].txC="black":t.maAr[s].txC="crimson",Sh=0,Function("return parseInt("+h+")==13")()&&(t.maAr[s].txC="green",Sh=1,console.log("mat"))}}class xh{constructor(t,h,s,i,e,r){if(this.map=t,this.c=r,e){switch(parseInt(3*D())){case 0:h=1;break;case 1:s=1;break;case 2:this.map.arr=Ut(12)}!function(t,h,s){var i=parseInt(4*D()),e=parseInt(3*D());switch(i){case 0:hh(t),Zt.push({x:845,y:672});break;case 1:sh(t),Zt.push({x:499.2,y:672});break;case 2:ih(t),Zt.push({x:819,y:672});break;case 3:eh(t),Zt.push({x:845,y:672})}var r=[[14,15,new kh(0,0,"Dgt",!0,10),16,14,19,20],[14,17,new kh(0,0,"Dgt",!0,2),16,14,19,20],[14,17,new kh(0,0,"Dgt",!0,6),15,14,19,20],[14,18,new kh(0,0,"Dgt",!0,3),15,14,19,20],[14,16,new kh(0,0,"Dgt",!0,15),15,14,19,20]];let n=-1!=t[1].indexOf(1);switch(e){case 0:for(var a=0;a<2;)a=parseInt(5*D());$(t,a,5),$(t,a,7),h.c=nh;break;case 1:for(a=0;a<3;)a=parseInt(4*D());$(t,a,6),h.c=ch;break;case 2:for(s=0;s<1;){var c=parseInt(22*D()),w=parseInt(30*D());if(1==t[c][w]&&1==t[c][w+1]&&1==t[c][w+2]&&1==t[c][w+3]&&1==t[c][w+4]&&1==t[c][w+5]&&1==t[c][w+6]&&1==t[c][w+7]||12==t[c][w]&&12==t[c][w+12]&&12==t[c][w+2]&&12==t[c][w+3]&&12==t[c][w+4]&&12==t[c][w+5]&&12==t[c][w+6]&&12==t[c][w+7]){for(var x=parseInt(D()*r.length),o=0;o<7;o++)"Number"==r[x][o].constructor.name?t[c][w+o]=r[x][o]:(t[c][w+o]=r[x][o],t[c][w+o].x=32*(w+o),t[c][w+o].y=32*c);s++}}h.c=wh}n&&J(t)}(this.map.arr,this)}!function(t){for(var h=0;h<t.length;h++)for(var s=0;s<t[h].length;s++)switch(Number(t[h][s])){case 1:t[h][s]=new dh(32*s,32*h);break;case 2:t[h][s]=new yh(32*s,32*h);break;case 3:t[h][s]=new uh(32*s,32*h);break;case 4:t[h][s]=new fh(32*s,32*h);break;case 5:t[h][s]=new bh(32*s,32*h);break;case 6:t[h][s]=new ph(32*s,32*h,[!1,!0]);break;case 7:t[h][s]=new gh(32*s,32*h);break;case 8:t[h][s]=new vh(32*s,32*h);break;case 9:t[h][s]=new zh(32*s,32*h);break;case 10:t[h][s]=new Mh(32*s,32*h);break;case 11:t[h][s]=new Ah(32*s,32*h);break;case 12:t[h][s]=new Ch(32*s,32*h);break;case 13:t[h][s]=new mh(32*s,32*h,[".","_"],Math.round(D()));break;case 14:t[h][s]=new kh(32*s,32*h,"Dgt",!1);break;case 15:t[h][s]=new kh(32*s,32*h,"Add",!0);break;case 16:t[h][s]=new kh(32*s,32*h,"Sub",!0);break;case 17:t[h][s]=new kh(32*s,32*h,"Mul",!0);break;case 18:t[h][s]=new kh(32*s,32*h,"Div",!0);break;case 19:t[h][s]=new kh(32*s,32*h,"Res",!0);break;case 20:t[h][s]=new kh(32*s,32*h,"Ans",!0);break;case 21:t[h][s]=new Dh(32*s,32*h);break;case 22:t[h][s]=new Fh(32*s,32*h)}}(this.map.arr),this.boxes=[],this.btns=[],this.b=h,this.r=s,this.boxT=[],this.maAr=[],this.mor=[],this.spw=[],l("Spw",this.map.arr,this.spw),l("Mor",this.map.arr,this.mor),l("Bxs",this.map.arr,this.boxes),l("Btn",this.map.arr,this.btns),l("BDT",this.map.arr,this.boxT),l("Mth",this.map.arr,this.maAr),function(t){let h=t.length;for(;h;){let s=Math.floor(D()*h);h--,[t[h],t[s]]=[t[s],t[h]]}}(this.btns),this.mor.sort(((t,h)=>t.x-h.x));for(let t=0;t<this.spw.length;t++)this.spw[t].spT=30*i.t,this.spw[t].enL=i.l;this.txt=".____...__"}upd(){Ih=this.b,Wh=this.r,this.map.upd(),this.c(this)}}class oh{constructor(t){this.arr=t}upd(){for(var t=0;t<this.arr.length;t++)for(var h=0;h<this.arr[t].length;h++)this.arr[t][h]&&o(this.arr[t][h],32,32)&&this.arr[t][h].drw(),this.arr[t][h]&&this.arr[t][h].upd()}}class lh{constructor(t,h){this.x=t,this.y=h,this.w=this.h=32,this.add=0,this.tim={c:0,m:90}}drw(){s.fillStyle=this.clr,s.fillRect(this.x,this.y,32,32)}upd(){}collide(t){return this.x+32>=t.x&&this.x<=t.x+t.w&&this.y+32>=t.y&&this.y<=t.y+t.h}uFr(){if(this.tim.c++,this.tim.c>this.tim.m)return this.tim.c=0,1}}class yh extends lh{constructor(t,h){super(t,h),this.col=!0}drw(){St(this,1,0)&&St(this,-1,0)?this.drw=function(){Q(this),j(this),n(x,y+h-1,w,1,"black"),n(x,y,w,1),Et(x,y),n(x,y+1*h/3,h,1),Et(x+1*w/8,y+1*h/3),n(x,y+2*h/3,h,1),Et(x+1*w/32,y+2*h/3)}:St(this,0,-1)&&St(this,0,1)?this.drw=function(){Lt(this)}:(St(this,0,-1)||St(this,0,1)||(this.drw=function(){Lt(this),n(this.x,this.y+this.h-1,this.w,1,"#6D798B"),n(this.x,this.y,this.w,1,"#6D798B")}),St(this,0,-1)&&(this.drw=function(){Lt(this),n(this.x,this.y+this.h-1,this.w,1,"#6D798B")}),St(this,0,1)&&(this.drw=function(){Lt(this),n(this.x,this.y,this.w,1,"#6D798B")}))}}class dh extends lh{constructor(t,h){super(t,h),this.f=1,this.fre=0}upd(){for(var t=0;t<Oh.length;t++)this.collide(Oh[t])&&(Oh[t].fri=0,Oh[t].acel=5)}drw(){Q(this)}}class uh extends lh{constructor(t,h){super(t,h),this.clr="#6b5421"}drw(){super.drw(),Sh&&Q(this)}upd(){let h={x:Yh.x-5,y:Yh.y-5,w:Yh.w+10,h:Yh.h+10};this.collide(h)&&Sh&&(Rh++,Yh.x=Zt[Rh].x,Yh.y=Zt[Rh].y,Ph=[],$h=[],Bh=[],Yh.bal=[],Sh=0,E=[],R=[],X=[],S=[],L=[],Eh=0,12==Rh&&Ph.push(new Qt(t.width/2,t.height/2,128,128)))}}class fh extends lh{constructor(t,h){super(t,h),this.enL=0,this.spT=0,this.cuT=0,this.c=0}arT(){this.cuT==this.spT&&(D()<.9?Ph.push(new jt(this.x,this.y,64,64,this)):Ph.push(new Jt(this.x,this.y,64,64,this)),this.cuT=0,this.c++),this.cuT++}drw(){Q(this),j(this),n(x+w/8,y+h/8,.75*w,.75*h,"#C6C6C8"),n(x+w/8,y+h/8,.75*w/8,.75*h,"red"),n(x+w/8,y+h/8,.75*w/4,.75*h/2.5,"red"),n(x+.05*w,y+h/1.5,.9*w,h/4,"#D9D9D9")}upd(){this.enL>=Ph.length&&this.arT()}}class ph extends lh{constructor(t,h){super(t,h),this.clr="red",this.cld=!1}upd(){if(this.collide(Yh)){if(Th[Rh].btns[ah]!=this||this.cld){if(!this.cld){for(var t=0;t<Th[Rh].btns.length;t++)Th[Rh].btns[t].clr="red";ah=0}}else this.clr="green",ah++;this.cld=!0,4==ah&&(Sh=!0)}else this.cld=!1}drw(){Q(this),Xt(this,this.clr)}}class mh extends lh{constructor(t,h,s,i){super(t,h),this.clr="red",this.cld=0,this.val=s,this.i=i}drw(){var t;Q(this),Xt(this,this.clr),j(t=this),n(x+w/2-w/1.5/2,y-h/3,w/1.5,h/2,H),U(x+w/2,y-h/3,t.val[t.i%t.val.length],w,N)}upd(){T((this.x+this.w/2-(Yh.x+Yh.w/2))**2+(this.y+this.h/2-(Yh.y+Yh.h/2))**2)<50&&(Yh.int=1,i[69]&&(this.i++,i[69]=!i[69]))}}class bh extends lh{constructor(t,h){super(t,h),this.clr="#FF9633",this.box=new Ht(this.x,this.y)}}class gh extends lh{constructor(t,h){super(t,h),this.act=0,this.clr="purple"}bCD(){for(var t=Th[Rh].boxes.length,h=0;h<t;h++)if(this.x+32>=Th[Rh].boxes[h].box.x&&this.x<=Th[Rh].boxes[h].box.x+Th[Rh].boxes[h].box.w&&this.y+32>=Th[Rh].boxes[h].box.y&&this.y<=Th[Rh].boxes[h].box.y+Th[Rh].boxes[h].box.h)return 1}upd(){this.act=this.bCD(),this.bCD()?this.clr="green":this.clr="red"}drw(){var t,h;Q(this),t=this,h=this.clr,j(t),Wt(h),ht(t,90),Wt(h),m()}}class vh extends lh{constructor(t,h,s){super(t,h),this.clr="#7C653C",this.col=1,this.txt=s}drw(){Q(this),j(this),n(x,y,w,h/1.75,"#7C653C"),n(x+w/2.2,y,w/8,h,"#7C653C"),n(x+.1*w,y+h/1.75*.5/4,.8*w,h/3/4,"#574220"),n(x+.1*w,y+h/1.75*1.75/4,.8*w,h/3/4,"#574220"),n(x+.1*w,y+h/1.75*3/4,.8*w,h/3/4,"#574220")}upd(){T((this.x+this.w/2-(Yh.x+Yh.w/2))**2+(this.y+this.h/2-(Yh.y+Yh.h/2))**2)<50&&(i[69]&&u(this.txt,"black",100),Yh.int=1)}}class Ch extends lh{constructor(t,h){super(t,h),this.f=1,this.fre=1}upd(){for(var t=0;t<Oh.length;t++)this.collide(Oh[t])&&(Oh[t].fri=.99,Oh[t].acel=.1)}drw(){n(this.x,this.y,32,32,"lightblue")}}class kh extends lh{constructor(t,h,s,i,e){switch(super(t,h),this.typ=s,this.fix=i,this.fix?this.txC="black":this.txC="crimson",this.val=0,this.typ){case"Dgt":this.fix?this.val=e%21:this.val=Math.floor(21*Math.random()),this.dgt=this.val;break;case"Add":this.dgt="+";break;case"Sub":this.dgt="-";break;case"Mul":this.dgt="*";break;case"Div":this.dgt="/";break;case"Res":this.dgt="=";break;case"Ans":this.dgt=13}this.str=this.val}opr(t,h){switch(this.typ){case"Add":h.str=t.str+h.val;break;case"Sub":h.str=t.str-h.val;break;case"Mul":h.str=t.str*h.val;break;case"Div":h.str=t.str/h.val;break;case"Res":this.str=t.str,h.str=t.str;break;case"Ans":this.str=this.dgt=this.val=13}}chg(t){return t}drw(){j(this),n(x+1,y+1,w-2,h-2,"#30353D"),U(this.x+this.w/2,this.y+this.h/2,this.dgt,this.w/1.5,this.txC)}upd(){T((this.x+this.w/2-(Yh.x+Yh.w/2))**2+(this.y+this.h/2-(Yh.y+Yh.h/2))**2)<50&&!this.fix&&(Yh.int=1,i[69]&&(this.val++,this.val%=21,this.dgt=this.val,this.str=this.val,i[69]=!1))}}class zh extends lh{constructor(t,h){super(t,h),this.col=!0,this.bx1={x:this.x,y:this.y,w:this.w,h:this.h},this.bx2={x:this.x,y:this.y-this.h/1.4,w:this.w,h:this.h}}drw(){At(this.bx1),At(this.bx2)}}class Mh extends lh{constructor(t,h){super(t,h),this.col=!0}drw(){At(this)}}class Ah extends lh{constructor(t,h){super(t,h),this.r=90*parseInt(4*D()),this.f=1,this.fre=0}drw(){var t,s;Q(this),P(3,"black"),t=this,s=this.r,j(t),ht(t,s),n(x+.4*w/3,y+1.6*h/3,w/5,h/5,"#4C4C4C"),n(x+1.7*w/3,y+2*h/3,w/3,h/4,"#4C4C4C"),n(x+.2*w/3,y+.2*h/3,w/3,h/3,"#333333"),n(x+2*w/3,y+.5*h/3,w/4,h/5,"#333333"),m(),P(0)}}class Dh extends lh{constructor(t,h){super(t,h),this.c="white",this.cnt=0,this.col=1}drw(){var t,s,i;Lt(this),Eh<=13&&(this.cnt=Eh),13==this.cnt&&(this.c="green"),t=this,s=this.cnt,i=this.c,j(t),n(x+1,y+1,w-2,h-2,"#20252E"),P(5,"black"),U(x+w/2,y+h/2,s,w/1.25,i),P(0)}}class Fh extends lh{constructor(t,h){super(t,h)}drw(){this.clr=Lh,super.drw()}}var Ih=0,Th=[new xh(new oh(function(t){return th(t),t[5][5]=t[17][25]=4,t[0][16]=t[0][15]=3,t[2][12]=new vh(384,64,"Well met, T’reze!;You hast reached the Tower of Dreizehn!;May the number thirteen bless your journey...;"),t[2][19]=new vh(608,64,"The sword you wield in your hand holds great power T’reze.;but everything has a price... If you dont feed the sword with souls...; In thirteen seconds she will feed on your own soul!;"),t[0][23]=21,J(t),t}(Ut(1))),0,0,{t:3,l:50},0,rh),new xh(new oh(function(t){return hh(t),t[3][5]=t[6][28]=t[9][9]=t[9][15]=5,t[7][1]=t[16][30]=t[2][17]=t[2][14]=7,t[9][1]=t[10][2]=t[10][1]=t[2][23]=t[2][24]=t[1][24]=t[1][25]=t[16][24]=t[16][23]=t[15][23]=9,t[10][3]=t[9][2]=t[8][1]=t[2][25]=t[1][22]=t[1][23]=t[1][26]=t[13][23]=t[14][24]=t[15][24]=t[14][23]=10,J(t),t}(Ut(1))),0,0,{t:3,l:50},0,nh),new xh(new oh(function(t){return sh(t),t[0][23]=21,J(t),t}(Ut(1))),1,0,{t:3,l:50},0,rh),new xh(new oh(function(t){return ih(t),t[4][26]=new vh(832,128,".-- .-. .. - . / - .... . / -. ..- -- -... . .-. / --- ..-. / - .... . / -.-. ..- .-. ... .;- .... .- - / -.. --- - .... / - .- .. -. - / -.-- --- ..- .-. / .-.. .. ..-. . .-.-.- .-.-.- .-.-.-;"),t[10][10]=t[10][11]=t[10][12]=t[10][13]=t[10][14]=t[10][17]=t[10][18]=t[10][19]=t[10][20]=t[10][21]=13,J(t),t}(Ut(1))),0,0,{t:3,l:50},0,(function(t){for(var h=0,s=0;s<t.mor.length;s++)if(t.mor[s].val[t.mor[s].i%t.mor[s].val.length]==t.txt[s]&&h++,h==t.mor.length){for(var i=0;i<t.mor.length;i++)t.mor[i].clr="green";Sh=1}else for(i=0;i<t.mor.length;i++)t.mor[i].clr="red",Sh=0})),new xh(new oh(function(t){return eh(t),t[12][8]=t[6][3]=t[18][28]=t[4][29]=6,J(t),t}(Ut(1))),0,0,{t:1,l:50},0,ch),new xh(new oh(function(t){return hh(t),t[8][9]=t[3][20]=4,t[0][20]=21,J(t),t}(Ut(1))),0,1,{t:1,l:50},0,rh),new xh(new oh(function(t){return sh(t),t[4][22]=14,t[4][23]=17,t[4][24]=new kh(768,128,"Dgt",!0,3),t[4][25]=15,t[4][26]=14,t[4][27]=19,t[4][28]=20,J(t),t}(Ut(1))),0,0,{t:1,l:50},0,wh),new xh(new oh(function(t){return ih(t),t[1][1]=t[22][30]=4,t[0][26]=21,t}(Ut(12))),0,0,{t:1,l:50},0,rh),new xh(new oh(Ut(1)),0,0,{t:1,l:50},1),new xh(new oh(Ut(1)),0,0,{t:1,l:50},1),new xh(new oh(Ut(1)),0,0,{t:1,l:50},1),new xh(new oh(Ut(1)),0,0,{t:1,l:50},1),new xh(new oh(function(t){return th(t),t[6][7]=t[6][8]=t[16][7]=t[16][8]=t[16][12]=t[16][11]=t[16][20]=t[16][21]=t[16][22]=t[16][23]=t[15][23]=t[14][23]=t[13][23]=t[10][23]=t[9][23]=t[8][23]=t[7][23]=t[7][22]=t[7][21]=t[7][20]=t[12][19]=t[11][19]=t[12][20]=t[11][20]=t[12][21]=t[11][21]=t[12][22]=t[11][22]=t[12][23]=t[11][23]=t[7][19]=t[6][19]=t[6][20]=t[6][21]=t[6][22]=t[6][23]=t[6][24]=t[7][24]=t[8][24]=t[9][24]=t[10][24]=t[11][24]=t[12][24]=t[13][24]=t[14][24]=t[15][24]=t[16][24]=t[17][24]=t[17][23]=t[17][22]=t[17][21]=t[17][20]=t[16][19]=t[17][19]=t[17][12]=t[17][7]=t[17][8]=t[17][11]=t[17][10]=t[17][9]=t[17][10]=t[16][9]=t[16][10]=t[15][9]=t[15][10]=t[14][9]=t[14][10]=t[13][9]=t[13][10]=t[12][9]=t[12][10]=t[11][9]=t[11][10]=t[10][9]=t[10][10]=t[9][9]=t[9][10]=t[8][9]=t[8][10]=t[7][7]=t[7][8]=t[7][9]=t[7][10]=t[6][10]=t[6][9]=22,J(t),t}(Ut(1))),0,0,{t:1,l:50},0,(function(){}))],Vh={t:0,sTX:"",aTX:"",clr:"",cTM:0},Ph=[],Bh=[],$h=[],Rh=0,Eh=0,Lh="green",Sh=0,Xh=(ah=0,200),Wh=0,Gh=setInterval((function(){n(0,0,t.width,t.height,"black");for(let t=0;t<20;t++)Bh.push(new K(Jh,"pur",0,1));for(let t=0;t<Bh.length;t++)o(Bh[t],0,0)&&Bh[t].drw();Y(Bh),P(15,"purple"),It(Nh),Tt(Nh),P(0,"purple"),P(10,"purple"),U(t.width/2,t.height/8,"13-Seconds-To-Kill",t.width/10,"purple"),P(0),_h.drw(),P(10,"red"),Ft(jh,"purple",75,105,30,0),Ft(jh,N,75,100,25,0),U(t.width/2,t.height/1.34,"press space to play",40,H),P(0),i[32]&&(clearInterval(Gh),Gh=setInterval(Uh,1e3/30))}),1e3/30),_h=new Yt(t.width/2-100,t.height/2+100,400,400),Yh=new Yt(t.width/2,t.height/3,64,64),Kh=[],Oh=[],qh=new class{constructor(){}drw(){P(5,"black"),M(104,48,"white"),A(159,48),A(169,48),A(159,64),A(104,64),z();let t=Yh.amo.c/Yh.amo.m;!t&&(t=1),M(104,48,"orange"),A(104+55*t,48),A(104+65*t,48),A(104+55*t,64),A(104,64),z(),M(104,32,"white"),A(214,32),A(224,40),A(214,48),A(104,48),z(),M(104,32,"red"),A(104+110*Yh.tim.c/Yh.tim.m,32),A(104+120*Yh.tim.c/Yh.tim.m,40),A(104+110*Yh.tim.c/Yh.tim.m,48),A(104,48),z(),P(0),ft({x:8,y:80,w:128,h:128},1*Yh.tim.c/Yh.tim.m||.001)}},Hh=new Gt(0,0);let Nh={x:-127.5,y:500,w:1.25*t.width,h:1.25*t.width},jh={x:t.width/2-t.width/3/2,y:650,w:t.width/3,lif:{c:0,m:0}},Jh={x:0,y:0,w:t.width,h:t.height};const Qh=zzfxM([[1.5,0,130.8128,.03,.4,.27,1,.5,,,,,,.1,,,.07,.64,.04,,107],[1.1,0,65.40639,.04,.91,.06,,1.2,,,,,.4,.1,,,,.52,.09,.22],[1.3,0,65.40639132514966,,.02,,,1.5,,,,,,5,,,,.7,.02],[.5,0,260,,,.04,,,,,,,.1,99,,,,2,.005,.2]],[[[0,0,12,0,0,0,0,0,0,-1,13,0,0,0,0,0,0,-1],[0,0,,,,,15,0,0,0,0,0,0,-1,15,0,0,0],[2,0,12,-1,,,,,,,84,-1,,,,,,],[3,0,,,,,12,-1,,,,,,,12,-1,,]]],[0],120);function Uh(){n(0,0,t.width,t.height,"black"),Oh=Ph.concat(Yh,d("box",Th[Rh].boxes)),Th[Rh].upd();for(let t=0;t<$h.length;t++)o($h[t],0,0)&&$h[t].drw();(Kh=Ph.concat(Yh,Yh.bal,d("box",Th[Rh].boxes))).sort(((t,h)=>t.y-h.y));for(let t=0;t<Kh.length;t++)o(Kh[t],Kh[t].w,Kh[t].h)&&Kh[t].drw();for(let t=0;t<Bh.length;t++)o(Bh[t],0,0)&&Bh[t].drw();for(var h=0;h<d("box",Th[Rh].boxes).length;h++)d("box",Th[Rh].boxes)[h].upd();var s,a;Y(Yh.bal),Y(Ph),Y(Bh),Yh.upd(),!Yh.dea&&(r=Math.atan2(e.y-Yh.y,e.x-(Yh.x+Yh.w/2))+V()*Wh||V()/2),Yh.d.x=I(r),Yh.d.y=F(r),i[87-4*Wh]&&Yh.spd.y>-Yh.msp&&(Yh.spd.y-=Yh.acel),i[83+4*Wh]&&Yh.spd.y<Yh.msp&&(Yh.spd.y+=Yh.acel),i[65+3*Wh]&&Yh.spd.x>-Yh.msp&&(Yh.spd.x-=Yh.acel),i[68-3*Wh]&&Yh.spd.x<Yh.msp&&(Yh.spd.x+=Yh.acel),qh.drw(),n(0,0,t.width*Wh,t.height*Wh,"rgba(75,0,130,0.4)"),function(){let t=D()*(D()<.5?1:-1)*Wh,h=D()*(D()<.5?1:-1)*Wh;Hh.x+=t,Hh.y+=h,b(t,h),!t&&(b(-Hh.x,-Hh.y),Hh.mtp(0)),(C(Hh.x)>2||C(Hh.y)>2)&&(Hh.x-=t,Hh.y-=h,b(-t,-h))}(),S&&function(){for(var t=0;t<S.length;t++)S[t]>=X[t]?(Th[Rh].map.arr[L[t].l][L[t].c]=R[t],E.splice(t,1),R.splice(t,1),X.splice(t,1),S.splice(t,1),L.splice(t,1),t--):(R[t].constructor.name==E[t].constructor.name&&(E.splice(t,1),R.splice(t,1),X.splice(t,1),S.splice(t,1),L.splice(t,1),t--),S[t]++)}(),Vh.t?(s=Vh.sTX,a=Vh.clr,Vh.t,n(0,t.height-100,t.width,100,"rgba(255,255,255,0.5)"),n(10,t.height-90,t.width-20,80,"rgba(0,0,0,0.5)"),U(t.width/2,t.height-50,s,20,a),Vh.t--,document.addEventListener("keyup",f)):""!=Vh.aTX&&u(Vh.aTX,Vh.clr,Vh.cTM)}Qh.loop=1,zzfxP(...Qh).loop=1;var Zh=0,ts=100,hs=0,ss=0,is={x:t.width/2,y:t.height/2,w:200,h:200};function es(){if(Zh<100){Zh++,n(0,0,t.width,t.height,"black"),Th[Rh].drw();for(let t=0;t<$h.length;t++)o($h[t],0,0)&&$h[t].drw();(Kh=Ph.concat(Yh,Yh.bal,d("box",Th[Rh].boxes))).sort(((t,h)=>t.y-h.y));for(let t=0;t<Kh.length;t++)o(Kh[t],Kh[t].w,Kh[t].h)&&Kh[t].drw();for(let t=0;t<Bh.length;t++)o(Bh[t],0,0)&&Bh[t].drw();for(var h=0;h<d("box",Th[Rh].boxes).length;h++)d("box",Th[Rh].boxes)[h].upd();Y(Yh.bal),Y(Ph),Yh.upd(),Y(Bh),99==Zh&&(Bh=[])}else hs<100?hs++:ss<100&&(ss+=5);if(n(0,0,t.width,t.height,"rgba(0,0,0,"+Zh/100+")"),hs>50){ts-=2,zt(is,is.x-25,0,0,"red",1);for(let t=0;t<Bh.length;t++)o(Bh[t],0,0)&&Bh[t].drw();Y(Bh),n(0,0,t.width,t.height,"rgba(0,0,0,"+ts/100+")")}P(10,"purple"),U(t.width/2,t.height-100,"You are dead.",t.width/30,"rgba(255,0,0,"+hs/100+")"),U(t.width/2,t.height-50,"The sword lays claim to your soul.",t.width/30,"rgba(255,0,0,"+hs/100+")"),U(t.width/2,150,"Press space to restart.",t.width/30,"rgba(255,0,0,"+ss/100+")"),P(0,"purple"),100==ss&&i[32]&&window.location.reload()}